<!DOCTYPE html>
<html>
<head>
  <title>API Test</title>
  <style>
    body { font-family: Arial; margin: 20px; background: #f5f5f5; }
    .container { max-width: 600px; background: white; padding: 20px; border-radius: 8px; }
    button { padding: 10px 20px; margin: 5px; cursor: pointer; background: #667eea; color: white; border: none; border-radius: 4px; }
    button:hover { background: #764ba2; }
    .result { background: #f0f0f0; padding: 15px; margin: 10px 0; border-radius: 4px; font-family: monospace; white-space: pre-wrap; word-break: break-all; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Smart Library - API Test</h1>
    
    <h2>Quick Test</h2>
    <button onclick="testLogin()">Test Login (Priyanshu)</button>
    <button onclick="testGetUsers()">Get All Users</button>
    <button onclick="testHealth()">Health Check</button>
    
    <h2>Results:</h2>
    <div id="result" class="result">Waiting for test...</div>
  </div>

  <script>
    const API_URL = 'http://localhost:5000/api';

    function showResult(title, data) {
      document.getElementById('result').textContent = title + ':\n\n' + JSON.stringify(data, null, 2);
    }

    function testLogin() {
      fetch(`${API_URL}/login`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ email: 'priyanshu.sharma24@st.niituniversity.in' })
      })
      .then(res => res.json())
      .then(data => showResult('Login Test', data))
      .catch(err => showResult('Error', { error: err.message }));
    }

    function testGetUsers() {
      fetch(`${API_URL}/users`)
      .then(res => res.json())
      .then(data => showResult('Get Users Test', data))
      .catch(err => showResult('Error', { error: err.message }));
    }

    function testHealth() {
      fetch(`${API_URL}/health`)
      .then(res => res.json())
      .then(data => showResult('Health Check', data))
      .catch(err => showResult('Error', { error: err.message }));
    }
  </script>
</body>
</html>
